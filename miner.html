<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Dashboard — HelixMine (Demo)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#071020;--panel:#0b1220;--accent:#4fd1c5;--muted:#9aa6b2}
    body{margin:0;background:linear-gradient(180deg,#071020,#06101a);font-family:Inter,system-ui;color:#e6eef3;}
    .wrap{display:flex;min-height:100vh}
    aside{width:260px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px}
    .logo{width:44px;height:44;border-radius:8px;background:linear-gradient(135deg,#2dd4bf,#06b6d4);display:flex;align-items:center;justify-content:center;color:#052025;font-weight:700;margin-bottom:12px}
    nav a{display:block;color:var(--muted);text-decoration:none;padding:12px;border-radius:8px;margin-bottom:6px}
    nav a.active{background:rgba(255,255,255,0.02);color:#e6eef3}
    main{flex:1;padding:20px}
    .top{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .card-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:10px}
    .chart{height:160px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
    .table{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    .controls{display:flex;gap:10px}
    .btn{background:linear-gradient(90deg,#06b6d4,#34d399);border:none;color:#052025;padding:10px 12px;border-radius:8px;font-weight:700;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
    .mini{font-size:13px;color:var(--muted)}
    .progress{height:10px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#06b6d4,#34d399);width:40%}
    .worker{display:flex;justify-content:space-between;padding:8px 6px;border-bottom:1px dashed rgba(255,255,255,0.02)}
    @media (max-width:1000px){
      .card-grid{grid-template-columns:repeat(2,1fr)}
      aside{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <aside>
      <div class="logo">HM</div>
      <div style="font-weight:700;margin-bottom:10px">HelixMine</div>
      <nav>
        <a href="#" class="active">Dashboard</a>
        <a href="#">Pools</a>
        <a href="#">Workers</a>
        <a href="#">Payouts</a>
        <a href="#">Settings</a>
        <a href="index.html" style="margin-top:12px">Return to site</a>
      </nav>
    </aside>
    <main>
      <div class="top">
        <div>
          <div style="font-size:13px;color:var(--muted)">Welcome back, <strong>Demo Operator</strong></div>
          <div style="font-weight:700;font-size:20px">Dashboard Overview</div>
        </div>
        <div class="controls">
          <button class="ghost" onclick="location.href='login.html'">Sign out</button>
          <button class="btn" onclick="toggleSim()">Pause Simulation</button>
        </div>
      </div>

      <div class="card-grid">
        <div class="card">
          <div class="mini">Hashrate</div>
          <div style="font-weight:700;font-size:18px" id="mh">198.4 MH/s</div>
          <div class="mini" style="margin-top:8px">24-hour average: <strong id="avg">197.9 MH/s</strong></div>
        </div>

        <div class="card">
          <div class="mini">Workers</div>
          <div style="font-weight:700;font-size:18px">12 <span style="color:var(--muted);font-weight:400">online</span></div>
          <div style="margin-top:8px" class="progress"><i id="loadbar" style="width:40%"></i></div>
        </div>

        <div class="card">
          <div class="mini">Accepted Shares</div>
          <div style="font-weight:700;font-size:18px" id="accepted">1,342</div>
        </div>

        <div class="card">
          <div class="mini">Pending Payout</div>
          <div style="font-weight:700;font-size:18px" id="pending">0.0123 BTC</div>
        </div>
      </div>

      <div style="display:grid;grid-template-columns:2fr 1fr;gap:12px">
        <div class="card">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
            <div style="font-weight:700">Hashrate (live)</div>
            <div class="mini">Last update: <span id="uptime">0s</span> ago</div>
          </div>
          <div class="chart" id="chart">[ Live-style sparkline — UI only ]</div>
          <div style="margin-top:10px" class="mini">Note: This is simulated data. No background mining occurs.</div>
        </div>

        <div class="card table">
          <div style="font-weight:700;margin-bottom:8px">Workers</div>
          <div id="workers">
            <!-- worker rows injected -->
          </div>
        </div>
      </div>

    </main>
  </div>

  <script>
    // Simulated miner logic (UI-only) — deliberately lightweight, no heavy loops
    let running = true;
    const mhEl = document.getElementById('mh');
    const avgEl = document.getElementById('avg');
    const accEl = document.getElementById('accepted');
    const pendEl = document.getElementById('pending');
    const loadBar = document.getElementById('loadbar');
    const uptimeEl = document.getElementById('uptime');
    const workersContainer = document.getElementById('workers');

    const workers = [
      {name:'rig-01', hr:16.5, temp:72},
      {name:'rig-02', hr:16.1, temp:69},
      {name:'rig-03', hr:17.4, temp:75},
      {name:'rig-04', hr:15.8, temp:68},
      {name:'rig-05', hr:15.9, temp:70},
      {name:'rig-06', hr:16.0, temp:71},
      {name:'rig-07', hr:16.7, temp:73},
      {name:'rig-08', hr:16.3, temp:69},
      {name:'rig-09', hr:16.2, temp:68},
      {name:'rig-10', hr:16.9, temp:74},
      {name:'rig-11', hr:15.7, temp:67},
      {name:'rig-12', hr:16.8, temp:72},
    ];

    function renderWorkers() {
      workersContainer.innerHTML = '';
      workers.forEach(w=>{
        const div = document.createElement('div');
        div.className = 'worker';
        div.innerHTML = `<div style="display:flex;flex-direction:column"><strong>${w.name}</strong><div class="mini">Temp ${w.temp}°C</div></div><div style="text-align:right"><div style="font-weight:700">${(w.hr).toFixed(1)} MH/s</div><div class="mini">uptime 3d</div></div>`;
        workersContainer.appendChild(div);
      });
    }
    renderWorkers();

    // Simulation values
    let base = 198.4;
    let accepted = 1342;
    let pending = 0.0123;
    let ticks = 0;
    let start = Date.now();

    function simulateTick() {
      if (!running) return;
      // gentle variation
      const jitter = (Math.sin(Date.now()/900) + Math.cos(Date.now()/1300))/2 * 2.2;
      const newVal = (base + jitter + (Math.random()-0.5)).toFixed(1);
      mhEl.textContent = newVal + ' MH/s';
      avgEl.textContent = ( (parseFloat(avgEl.textContent) * Math.max(0,ticks) + parseFloat(newVal)) / Math.max(1,ticks+1) ).toFixed(1) + ' MH/s';

      // accepted shares occasionally increase
      if (Math.random() > 0.55) {
        const inc = Math.floor(Math.random()*4);
        accepted += inc;
        accEl.textContent = accepted.toLocaleString();
        pending = +(pending + inc * 0.0000015).toFixed(8);
        pendEl.textContent = pending.toFixed(8) + ' BTC';
      }

      // update worker HRs slightly
      workers.forEach(w => {
        const change = (Math.random()-0.5)*0.25;
        w.hr = Math.max(14, w.hr + change);
      });
      renderWorkers();

      // load bar reflects percent of some target
      const pct = Math.min(1, Math.max(0.1, (parseFloat(newVal)/210)));
      loadBar.style.width = Math.round(pct*100) + '%';

      ticks++;
      uptimeEl.textContent = Math.floor((Date.now()-start)/1000) + 's';
    }

    let simInterval = setInterval(simulateTick, 900);

    function toggleSim(){
      running = !running;
      document.querySelector('.btn').textContent = running ? 'Pause Simulation' : 'Resume Simulation';
      if (running && !simInterval) simInterval = setInterval(simulateTick, 900);
      if (!running && simInterval) { clearInterval(simInterval); simInterval = null; }
    }

    // harmless sparkline placeholder (random)
    const chart = document.getElementById('chart');
    (function drawSpark(){
      const d = Array.from({length:40}, ()=>Math.random()*40+30);
      chart.textContent = '';
      const svgNS = 'http://www.w3.org/2000/svg';
      const s = document.createElementNS(svgNS,'svg');
      s.setAttribute('width','100%');
      s.setAttribute('height','140');
      let path = '';
      d.forEach((v,i)=>{
        const x = (i/(d.length-1))*100;
        const y = (1 - (v-30)/50)*120 + 10;
        path += (i===0 ? 'M' : ' L') + x + ',' + y;
      });
      const p = document.createElementNS(svgNS,'path');
      p.setAttribute('d',path);
      p.setAttribute('stroke','rgba(79,209,197,0.85)');
      p.setAttribute('fill','none');
      p.setAttribute('stroke-width','2');
      s.appendChild(p);
      chart.appendChild(s);
    })();

  </script>
</body>
</html>
